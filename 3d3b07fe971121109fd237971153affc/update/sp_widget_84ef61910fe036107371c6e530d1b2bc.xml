<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($scope, $timeout, $sce) {
	/* widget controller */
	var c = this;

	/** Load menu **/

	c.categoryCurrent = '';
	c.subCategoryCurrent = '';
	c.catalogs = JSON.parse(c.data.catalogs);
	c.categories = [];
	c.categoryCategoriesOrCatItems = [];
	c.categoryCatItems = [];

	c.showCatalogCategories = [];	
	c.showCategoryCategoriesOrCatItems = [];	
	c.showCatItem = [];

	c.loadCatalogCategories = function(catalog, catalogSysID) {

		c.server.get({
			action: 'getCatalogCategories', 
			catalogSysID: catalogSysID
		}).then(function(response) {
			c.categories = JSON.parse(response.data.catalogCategories);

			c.catalogs.forEach(function(catalog) {
				if (catalog.sysID == catalogSysID) {
					c.showCatalogCategories[catalog.sysID] = !c.showCatalogCategories[catalog.sysID];
				} else {
					c.showCatalogCategories[catalog.sysID] = false;
				}

				if (c.categories.list.length > 0) {

					c.categories.list.forEach(function(categoriesOrCatItems) {

						if (categoriesOrCatItems.sysID == c.categoryCurrent) {
							c.showCategoryCategoriesOrCatItems[categoriesOrCatItems.sysID] = !c.showCategoryCategoriesOrCatItems[categoriesOrCatItems.sysID];
						} else {
							c.showCategoryCategoriesOrCatItems[categoriesOrCatItems.sysID] = false;
						}
					});
				}

				if (c.categoryCategoriesOrCatItems.length > 0) {

					c.categoryCategoriesOrCatItems.list.forEach(function(categoriesOrCatItems) {

						if (categoriesOrCatItems.sysID == c.subCategoryCurrent) {					
							c.showCatItem[categoriesOrCatItems.sysID] = !c.showCatItem[categoriesOrCatItems.sysID];					
						} else {
							c.showCatItem[categoriesOrCatItems.sysID] = false;					
						}
					});
				}
			});
		});
	};

	c.loadCategoryCategoriesOrCatItems = function(categorySysID) {

		c.categoryCurrent = categorySysID;

		c.server.get({
			action: 'getCategoryCategoriesOrCatItems', 
			categorySysID: categorySysID
		}).then(function(response) {

			c.categoryCategoriesOrCatItems = JSON.parse(response.data.categoryCategoriesOrCatItems);

			c.categories.list.forEach(function(categoriesOrCatItems) {

				if (categoriesOrCatItems.sysID == categorySysID) {
					c.showCategoryCategoriesOrCatItems[categoriesOrCatItems.sysID] = !c.showCategoryCategoriesOrCatItems[categoriesOrCatItems.sysID];
				} else {
					c.showCategoryCategoriesOrCatItems[categoriesOrCatItems.sysID] = false;
				}

				if (c.categoryCategoriesOrCatItems.list.length > 0) {

					c.categoryCategoriesOrCatItems.list.forEach(function(categoriesOrCatItems) {

						if (categoriesOrCatItems.sysID == c.subCategoryCurrent) {					
							c.showCatItem[categoriesOrCatItems.sysID] = !c.showCatItem[categoriesOrCatItems.sysID];					
						} else {
							c.showCatItem[categoriesOrCatItems.sysID] = false;					
						}
					});
				}

			});

		});

	};

	c.loadCategoryCatItems = function(categorySysID) {

		c.subCategoryCurrent = categorySysID;

		c.server.get({
			action: 'getCategoryCatItems', 
			categorySysID: categorySysID
		}).then(function(response) {

			c.categoryCatItems = JSON.parse(response.data.categoryCatItems);

			c.categoryCategoriesOrCatItems.list.forEach(function(categoriesOrCatItems) {

				if (categoriesOrCatItems.sysID == categorySysID) {					
					c.showCatItem[categoriesOrCatItems.sysID] = !c.showCatItem[categoriesOrCatItems.sysID];					
				} else {
					c.showCatItem[categoriesOrCatItems.sysID] = false;					
				}
			});			
		});
	};

	/** Searched text menu **/

	$scope.catalogBySearchText = [];

	c.showCatalogCategoriesV2 = [];
	c.showCategoryCategoriesOrCatItemsV2 = [];
	c.showCatItemV2 = [];

	$scope.searchText = '';
	$scope.catalogItems = [];
	$scope.isSearching = false;
	$scope.showAlertMessage = false;

	var debounceTimer;

	$scope.$watch('searchText', function(newVal) {

		if (debounceTimer) $timeout.cancel(debounceTimer);

		if (newVal && newVal.length >= 3) {

			debounceTimer = $timeout(function() {

				$scope.isSearching = true;

				$scope.server.get({ searchText: newVal }).then(function(response) {

					var catalogBySearchText = JSON.parse(response.data.catalogBySearchText);					
					$scope.catalogBySearchText = catalogBySearchText || [];

					setVisibleMenuWithCatalogBySearchText(catalogBySearchText);

					$scope.isSearching = false;
					$scope.showAlertMessage = catalogBySearchText.length > 0 ? false : true;
				});

			}, 500);

		} else {

			$scope.catalogBySearchText = [];
			$scope.showAlertMessage = false;
		} 
	});

	$scope.clearSearch = function() {
		$scope.searchText = '';
	};

	c.loadCatalogCategoriesV2 = function(catalogSysID) {

		$scope.catalogBySearchText.forEach(function(catalog) {

			if (catalog.sysID == catalogSysID) {				
				c.showCatalogCategoriesV2[catalog.sysID] = !c.showCatalogCategoriesV2[catalog.sysID];
			}
		});
	};

	c.loadCategoryCategoriesOrCatItemsV2 = function(categories, categorySysID) {

		categories.forEach(function(category) {
			if (category.sysID == categorySysID) {
				c.showCategoryCategoriesOrCatItemsV2[category.sysID] = !c.showCategoryCategoriesOrCatItemsV2[category.sysID];
			} else {
				c.showCategoryCategoriesOrCatItemsV2[category.sysID] = false;
			}
		});
	};

	c.loadSubCategoryCatItems = function(subcategories, subCategorySysID) {

		subcategories.forEach(function(subcategory) {
			if (subcategory.sysID == subCategorySysID) {
				c.showCatItemV2[subcategory.sysID] = !c.showCatItemV2[subcategory.sysID];
			} else {
				c.showCatItemV2[subcategory.sysID] = false;
			}
		});
	};

	function setVisibleMenuWithCatalogBySearchText(catalogBySearchText) {

		catalogBySearchText.forEach(function(catalog) {

			c.showCatalogCategoriesV2[catalog.sysID] = true;

			catalog.categories.forEach(function(category) {

				c.showCategoryCategoriesOrCatItemsV2[category.sysID] = true

				category.subcategories.forEach(function(subcategory) {

					c.showCatItemV2[subcategory.sysID] = true;
				});

			});
		});
	}

	/** Modal functions **/

	c.sendCloseSignal = function() {
		$rootScope.$broadcast('childToParentMessage', {
			action: 'close',
			reason: 'User seletected catalog item'
		});
	};

	$scope.highlightMatch = function(text) {

		var term = $scope.searchText;
		
		if (!text || !term || term.length < 3) {
			return $sce.trustAsHtml(text);
		}

		// Escapa caracteres especiais do termo
		var escapedTerm = term.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
		var regex = new RegExp('(' + escapedTerm + ')', 'gi');

		// Aplica destaque com estilo personalizado
		var highlighted = text.replace(regex, '<span class="highlight">$1</span>');
		return $sce.trustAsHtml(highlighted);
	};

};]]></client_script>
        <controller_as>c</controller_as>
        <css>span, i {
  line-height: 124%;
  color: rgba(0, 87, 48, 0.9206) !important;
}

span {
  font-weight: 600;
  font-size: 1.6rem;
  color: rgba(0, 87, 48, 0.9206) !important;
}

i.fa-chevron-down, i.fa-chevron-right {
  font-size: 1rem !important;
  margin-top: .3rem;
}

i.fa-file-text {
  font-size: 1.6rem !important;
}

a {
  cursor: pointer;
  display: flex;
  gap: 1.8rem;
  padding: .8rem 1.2rem;
}


.highlight {
  font-weight:800;
}

.custom-input .form-control {
  background-color: #E6F6EB;
  border: 2px solid #cce3d5;
  border-radius: 6px;
  transition: all 0.3s ease;
  box-shadow: none;
  padding: 1.8rem;
}

.custom-input .form-control:focus {
  border-color: #66bb6a;
  box-shadow: 0 0 8px rgba(102, 187, 106, 0.4);
  background-color: #f0fff5;
}

/* Estiliza o placeholder com opacidade */
.custom-input .form-control::placeholder {
  color: #333;
  opacity: 0.5; /* valor entre 0 (transparente) e 1 (opaco) */
}

/* Compatibilidade com navegadores antigos */
.custom-input .form-control:-ms-input-placeholder {
  color: #333;
  opacity: 0.5;
}

.custom-input .form-control::-ms-input-placeholder {
  color: #333;
  opacity: 0.5;
}

.clear-icon {
  position: absolute;
  right: 10px;
  top: 38px;
  color: #999;
  cursor: pointer;
  z-index: 2;
}

.clear-icon {
  position: absolute;
  right: 1rem;
  top: 1rem;
  color: #999;
  cursor: pointer;
  z-index: 2;
}

.spinner-icon {
  position: absolute;
  right: 1rem;
  top: 1rem; /* ajusta conforme altura do input */
  color: #999;
  pointer-events: none;
}

/* Container com scroll */
.scroll-container {
  overflow-y: scroll;
  height: 100vh;
  padding-right: 2rem;
  padding-bottom: 2rem;
}

/* Estilo da barra de rolagem */
.scroll-container::-webkit-scrollbar {
  width: 1.2rem;
  padding: 1rem .4rem;
}

/* Estilo do trilho (track) */
.scroll-container::-webkit-scrollbar-track {
  background: #FFFFFF;    
  border-radius: .6rem;            
}

/* Estilo do "thumb" (parte que desliza) */
.scroll-container::-webkit-scrollbar-thumb {
  background-color: #E6F6EB;
  border: .2rem solid rgba(0, 87, 48, 0.9206);
  border-radius: .6rem;
}

/* Hover no thumb */
.scroll-container::-webkit-scrollbar-thumb:hover {
  opacity: 50%;
}

.nivel-0, .nivel-1, .nivel-2, .nivel-3, .nivel-4 {
  padding-top: 1.4rem;
}

.nivel-0 {
  display: flex;
}

.nivel-0 span {
  margin-left: 1.6rem;
}

.nivel-1 a:hover {
  background-color: #E6F6EB;
  border-radius: .8rem;
}

.cat-item {
  padding-bottom: 1.4rem;
}

.cat-item:last-of-type {
  padding-bottom: 0;
}

.nivel-1 { margin-left: 10px; }
.nivel-2 { margin-left: 20px; }
.nivel-3 { margin-left: 30px; }
.nivel-4 { margin-left: 40px; }

.my-alert {
	margin-top: 2.2rem;
}

.margin-bottom-32 {
	margin-bottom: 3.2rem;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>navigation-drawer</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Navigation Drawer</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	/* populate the 'data' object */
	/* e.g., data.table = $sp.getValue('table'); */

	var catalogs = [];
	var grScCatalog = new GlideRecord('sc_catalog');
	grScCatalog.addQuery('active', true);
	grScCatalog.orderBy('title');
	grScCatalog.query();
	while (grScCatalog.next()) {
		var catalog = {
			sysID: grScCatalog.getValue('sys_id'),
			name: grScCatalog.getDisplayValue('title')
		};
		catalogs.push(catalog);
	}
	data.catalogs = JSON.stringify(catalogs);

	if (input && input.action == 'getCatalogCategories') {
		data.catalogCategories = getCatalogCategories(input.catalogSysID);
	}

	if (input && input.action == 'getCategoryCategoriesOrCatItems') {
		data.categoryCategoriesOrCatItems = getCategoryCategoriesOrCatItems(input.categorySysID);
	}

	if (input && input.action == 'getCategoryCatItems') {
		data.categoryCatItems = getCategoryCatItems(input.categorySysID);
	}

	if (input && input.searchText && (input.searchText).length >= 3) {
		data.catalogBySearchText = getCatalogItemsBySearchText(input.searchText)
	}

	function getCatalogCategories(catalogSysID) {
		var categories = {
			catalogSysID: catalogSysID,
			list: []
		};

		var grCategory = new GlideRecord('sc_category');
		grCategory.addEncodedQuery("active=true^parent=NULL^sc_catalog="+catalogSysID+"^ORDERBYtitle");
		grCategory.query();
		while (grCategory.next()) {

			var hasSubCategries = hasRecords('sc_category', 'parent='+grCategory.getValue('sys_id'));
			var hasCatItem = hasRecords('sc_cat_item', 'category='+grCategory.getValue('sys_id'));
			if (hasSubCategries || hasCatItem) {
				var category = {
					sysID: grCategory.getValue('sys_id'),
					name: grCategory.getDisplayValue('title')
				};
				categories.list.push(category);
			}
		}

		return JSON.stringify(categories);
	}

	function getCategoryCategoriesOrCatItems(categorySysID) {
		var itemsList = [];
		var items = {
			categorySysID: categorySysID,
			list: []
		};

		var hasSubCategories = hasRecords('sc_category', 'parent='+categorySysID);
		if (hasSubCategories) {

			var grCategory = new GlideRecord('sc_category');
			grCategory.addEncodedQuery("active=true^parent=" + categorySysID + "^ORDERBYtitle");
			grCategory.query();
			while (grCategory.next()) {

				var hasCatItemsAux1 = hasRecords('sc_cat_item', 'active=true^category='+grCategory.getValue('sys_id'));
				if (hasCatItemsAux1) {
					var category = {
						sysID: grCategory.getValue('sys_id'),
						name: grCategory.getDisplayValue('title'),
						isCatItem: false
					};
					itemsList.push(category);
				}
			}

			items.list = itemsList;
		}

		var hasCatItemsAux2 = hasRecords('sc_cat_item', 'active=true^category='+categorySysID);
		if (hasCatItemsAux2) {

			var catItems = JSON.parse(getCategoryCatItems(categorySysID));
			if (items.list.length > 0)
				items.list = itemsList.concat(catItems.list)
			else
				items.list = catItems.list;
		}

		return JSON.stringify(items);
	}

	function getCategoryCatItems(categorySysID) {
		var items = {
			categorySysID: categorySysID,
			list: []
		};

		var grItem = new GlideRecord('sc_cat_item');
		grItem.addQuery('category', categorySysID);
		grItem.addQuery('active', true);
		grItem.addQuery('visible_standalone', true);
		grItem.orderBy('name');
		grItem.query();

		while (grItem.next()) {
			items.list.push({
				sysID: grItem.getValue('sys_id'),
				name: grItem.getDisplayValue('name'),
				isCatItem: true
			});
		}

		return JSON.stringify(items);
	}

	function getCatalogItemsBySearchText(searchText) {

		var catalogBySearchText = [];

		var catalogGR = new GlideRecord('sc_catalog'); 
		catalogGR.addQuery('active', true);
		catalogGR.orderBy('title');
		catalogGR.query();

		while (catalogGR.next()) {
			var catalogObj = {
				sysID: catalogGR.getUniqueValue(),
				name: catalogGR.getValue('title'),
				categories: []
			};

			var categoryGR = new GlideRecord('sc_category');
			categoryGR.addQuery('sc_catalog', catalogGR.getUniqueValue());
			categoryGR.addQuery('active', true);
			categoryGR.addQuery('parent', 'NULL');
			categoryGR.orderBy('title');
			categoryGR.query();

			while (categoryGR.next()) {
				var categoryObj = {
					sysID: categoryGR.getUniqueValue(),
					name: categoryGR.getValue('title'),
					items: [],
					subcategories: []
				};

				// Itens diretamente na categoria
				var itemGR = new GlideRecord('sc_cat_item');
				itemGR.addQuery('category', categoryGR.getUniqueValue());
				itemGR.addQuery('active', true);
				itemGR.addQuery('visible_standalone', true);
				itemGR.addQuery('name', 'CONTAINS', searchText);
				itemGR.orderBy('name');
				itemGR.query();

				while (itemGR.next()) {			
					categoryObj.items.push({
						name: itemGR.getValue('name'),
						sysID: itemGR.getUniqueValue()
					});
				}

				// Subcategorias da categoria
				var subcatGR = new GlideRecord('sc_category');
				subcatGR.addQuery('parent', categoryGR.getUniqueValue());
				categoryGR.addQuery('active', true);
				categoryGR.orderBy('title');
				subcatGR.query();

				while (subcatGR.next()) {
					var subcatObj = {
						sysID: subcatGR.getUniqueValue(),
						name: subcatGR.getValue('title'),
						items: []
					};

					var subItemGR = new GlideRecord('sc_cat_item');
					subItemGR.addQuery('category', subcatGR.getUniqueValue());
					subItemGR.addQuery('active', true);
					subItemGR.addQuery('visible_standalone', true);
					subItemGR.addQuery('name', 'CONTAINS', searchText);
					subItemGR.query();

					while (subItemGR.next()) {
						subcatObj.items.push({
							name: subItemGR.getValue('name'),
							sysID: subItemGR.getUniqueValue()
						});
					}

					if (subcatObj.items.length > 0) {
						categoryObj.subcategories.push(subcatObj);
					}
				}

				if (categoryObj.items.length > 0 || categoryObj.subcategories.length > 0) {
					catalogObj.categories.push(categoryObj);
				}
			}

			if (catalogObj.categories.length > 0) {
				catalogBySearchText.push(catalogObj);
			}
		}

		return JSON.stringify(catalogBySearchText);
	}

	function hasRecords(table, query) {

		var grTable = new GlideRecord(table);
		grTable.addEncodedQuery(query);
		grTable.setLimit(1);
		grTable.query();

		if (grTable.next())
			return true;

		return false;
	}

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-10-11 18:53:44</sys_created_on>
        <sys_id>84ef61910fe036107371c6e530d1b2bc</sys_id>
        <sys_mod_count>122</sys_mod_count>
        <sys_name>Navigation Drawer</sys_name>
        <sys_package display_value="My Widgets" source="x_821667_my_widget">3d3b07fe971121109fd237971153affc</sys_package>
        <sys_policy/>
        <sys_scope display_value="My Widgets">3d3b07fe971121109fd237971153affc</sys_scope>
        <sys_update_name>sp_widget_84ef61910fe036107371c6e530d1b2bc</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-10-15 19:55:17</sys_updated_on>
        <template><![CDATA[<div class="menu">
  <div>    
    <div class="form-group custom-input position-relative" style="position: relative;">
      <input type="text" 
             id="catalogSearch" 
             class="form-control"
             ng-model="searchText" 
             placeholder="Digite pelo menos 3 letras..."
             style="padding-right: 2rem;">

      <!-- Ícone de limpar -->
      <span ng-if="!isSearching && searchText.length > 0" class="clear-icon" ng-click="clearSearch()">
        <i class="fa fa-times-circle"></i>
      </span>

      <!-- Spinner dentro do input -->
      <span ng-if="isSearching" class="spinner-icon">
        <i class="fa fa-spinner fa-spin"></i>
      </span>
    </div>

    <!--ul class="list-group" ng-if="catalogStructure.length > 0">
      <li class="list-group-item" ng-repeat="catalog in catalogStructure">
        {{::catalog.name}}
        <ul class="list-group" ng-if="catalog.categories.length > 0">
          <li class="list-group-item" ng-repeat="category in catalog.categories">
            {{::category.name}}
            <ul class="list-group" ng-if="category.subcategories.length > 0">
              <li class="list-group-item" ng-repeat="subcategory in category.subcategories">
                {{::subcategory.name}}
                <ul class="list-group" ng-if="subcategory.items.length > 0">
                  <li class="list-group-item" ng-repeat="item in subcategory.items">
                    <a href="?id=sc_cat_item&sys_id={{item.sysID}}">{{::item.name}}</a>
                  </li>
                </ul>
              </li>
            </ul>
            <ul class="list-group" ng-if="category.items.length > 0">
              <li class="list-group-item" ng-repeat="item in category.items">
                <a href="?id=sc_cat_item&sys_id={{item.sysID}}">{{::item.name}}</a>
              </li>
            </ul>
          </li>
        </ul>        
      </li>
    </ul>
    <div ng-if="!isSearching && searchText.length >= 3 && catalogStructure.length === 0">
      <p>Nenhum item encontrado.</p>
    </div-->

    <div class="nivel-0">
      <i class="fa fa-chevron-down" aria-hidden="true"></i>
      <span>${Formulários por categoria}</span>
    </div>
    <div class="scroll-container">

      <!-- Load menu -->
      <div ng-repeat="catalog in c.catalogs" class="nivel-1" ng-if="searchText.length < 3">
        <a ng-click="c.loadCatalogCategories(catalog, catalog.sysID)">
          <i class="fa fa-chevron-right" aria-hidden="true" ng-if="!c.showCatalogCategories[catalog.sysID]"></i>
          <i class="fa fa-chevron-down" aria-hidden="true" ng-if="c.showCatalogCategories[catalog.sysID]"></i>       
          <span>{{::catalog.name}}</span>
        </a>
        <div ng-if="c.categories.catalogSysID == catalog.sysID && c.showCatalogCategories[catalog.sysID]">
          <div ng-repeat="category in c.categories.list" class="nivel-2">
            <a ng-click="c.loadCategoryCategoriesOrCatItems(category.sysID)">
              <i class="fa fa-chevron-right" aria-hidden="true" ng-if="!c.showCategoryCategoriesOrCatItems[category.sysID]"></i>
              <i class="fa fa-chevron-down" aria-hidden="true" ng-if="c.showCategoryCategoriesOrCatItems[category.sysID]"></i>
              <span>{{::category.name}}</span>            
            </a>
            <div ng-if="c.categoryCategoriesOrCatItems.categorySysID == category.sysID && c.showCategoryCategoriesOrCatItems[category.sysID]">
              <div ng-repeat="categoryOrCatItem in c.categoryCategoriesOrCatItems.list" class="nivel-3">
                <a href="?id=sc_cat_item&sys_id={{::categoryOrCatItem.sysID}}" ng-if="categoryOrCatItem.isCatItem" ng-click="c.sendCloseSignal()">
                  <i class="fa fa-file-text" aria-hidden="true"></i>                
                  <span>{{::categoryOrCatItem.name}}</span>
                </a>
                <a ng-click="c.loadCategoryCatItems(categoryOrCatItem.sysID)" ng-if="!categoryOrCatItem.isCatItem">
                  <i class="fa fa-chevron-right" aria-hidden="true" ng-if="!c.showCatItem[categoryOrCatItem.sysID]"></i>
                  <i class="fa fa-chevron-down" aria-hidden="true" ng-if="c.showCatItem[categoryOrCatItem.sysID]"></i>                
                  <span>{{::categoryOrCatItem.name}}</span>
                </a>
                <div ng-if="c.categoryCatItems.categorySysID == categoryOrCatItem.sysID && !categoryOrCatItem.isCatItem && c.showCatItem[categoryOrCatItem.sysID]" 
                     class="nivel-4"
                >
                  <div ng-repeat="catItem in c.categoryCatItems.list" class="cat-item">
                    <a href="?id=sc_cat_item&sys_id={{::catItem.sysID}}" ng-click="c.sendCloseSignal()">
                      <i class="fa fa-file-text" aria-hidden="true"></i>                    
                      <span>{{::catItem.name}}</span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Searched text menu -->
      <div ng-repeat="catalog in catalogBySearchText" class="nivel-1 margin-bottom-32" ng-if="searchText.length > 2 && catalogBySearchText && catalogBySearchText.length > 0">
        <a ng-click="c.loadCatalogCategoriesV2(catalog.sysID)">
          <i class="fa fa-chevron-right" aria-hidden="true" ng-if="!c.showCatalogCategoriesV2[catalog.sysID]"></i>
          <i class="fa fa-chevron-down" aria-hidden="true" ng-if="c.showCatalogCategoriesV2[catalog.sysID]"></i>       
          <span>{{::catalog.name}}</span>
        </a> 
        <div ng-if="catalog.categories.length > 0 && c.showCatalogCategoriesV2[catalog.sysID]">
          <div ng-repeat="category in catalog.categories" class="nivel-2">
            <a ng-click="c.loadCategoryCategoriesOrCatItemsV2(catalog.categories, category.sysID)">
              <i class="fa fa-chevron-right" aria-hidden="true" ng-if="!c.showCategoryCategoriesOrCatItemsV2[category.sysID]"></i>
              <i class="fa fa-chevron-down" aria-hidden="true" ng-if="c.showCategoryCategoriesOrCatItemsV2[category.sysID]"></i>
              <span>{{::category.name}}</span>            
            </a>
            <div ng-if="(category.subcategories.length > 0 || category.items.length > 0) && c.showCategoryCategoriesOrCatItemsV2[category.sysID]">
              <div ng-repeat="catItem in category.items" class="nivel-3">
                <a href="?id=sc_cat_item&sys_id={{::catItem.sysID}}" ng-click="c.sendCloseSignal()">
                  <i class="fa fa-file-text" aria-hidden="true"></i>
                  <span ng-bind-html="highlightMatch(catItem.name)"></span>
                </a>
              </div>
              <div ng-repeat="subcategory in category.subcategories" class="nivel-3">
                <a ng-click="c.loadSubCategoryCatItems(category.subcategories, subcategory.sysID)">
                  <i class="fa fa-chevron-right" aria-hidden="true" ng-if="!c.showCatItemV2[subcategory.sysID]"></i>
                  <i class="fa fa-chevron-down" aria-hidden="true" ng-if="c.showCatItemV2[subcategory.sysID]"></i>                
                  <span>{{::subcategory.name}}</span>
                </a>
                <div ng-if="subcategory.items.length > 0 && c.showCatItemV2[subcategory.sysID]" class="nivel-4">
                  <div ng-repeat="catItem in subcategory.items" class="cat-item">
                    <a href="?id=sc_cat_item&sys_id={{::catItem.sysID}}" ng-click="c.sendCloseSignal()">
                      <i class="fa fa-file-text" aria-hidden="true"></i>                    
                      <span ng-bind-html="highlightMatch(catItem.name)"></span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="alert my-alert alert-danger alert-dismissible" 
           role="alert" 
           ng-if="showAlertMessage"
      >
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <strong>${Não foram encontrados formulários com termo pesquisado!}</strong>
      </div>
    </div>
  </div>
</div>]]></template>
    </sp_widget>
</record_update>
